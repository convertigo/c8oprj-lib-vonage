↓Div [mobile.components.UIDynamicElement-1604078553712]: 
  beanData: '{"ionBean":"DivTag"}'
  identifier: publisher
  tagName: div
  ↓Attr [mobile.components.UIAttribute-1604079195417]: 
    attrName: id
    attrValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
        - MobileSmartSourceType: plain:publisher
  ↓Style [mobile.components.UIStyle-1604079255194]: 
    styleContent: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.FormatedContent
        - com.twinsoft.convertigo.beans.common.FormatedContent: 
          →: |
            '	height: 100%
            '
  ↓Event [mobile.components.UIControlEvent-1604916937522]: 
    attrName: (click)
    eventName: onClick
    ↓useOpenTok [mobile.components.UICustomAction-1604075099202]: 
      actionValue: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.FormatedContent
          - com.twinsoft.convertigo.beans.common.FormatedContent: 
            →: |
              '            page.c8o.log.debug(''[OpenTok] token     : '' + vars.token);
                          page.c8o.log.debug(''[OpenTok] apiKey    : '' + vars.apiKey);
                          page.c8o.log.debug(''[OpenTok] sessionId : '' + vars.sessionId);
                          page.c8o.log.debug(''[OpenTok] mode      : '' + vars.mode);
              
              		    
                  		function handleError(error) {
                  		    if (error) {
                                  page.c8o.log.error(''[OpenTok] error : '' + error.message);
                  		    }
                  		}
                  		
                  		var session = OT.initSession(vars.apiKey, vars.sessionId);
                  		
                  		if (vars.mode == "subscriber") {
                      		session.on(''streamCreated'', function(event) {
                      		     session.subscribe(event.stream, ''subscriber'', {
                      		       insertMode: ''append'',
                      		       width: ''100%'',
                      		       height: ''100%''
                      		     }, handleError);
                                   resolve();
                                   return;
                      		});
                  		}
                  		
                          if (vars.mode == "publisher") {
                      		const publisher = OT.initPublisher(''publisher'', {
                      		        insertMode: ''append'',
                      		        width: ''100%'',
                      		        height: ''100%''
                      		}, handleError)
                      		
                              // Connect to the session
                              session.connect(vars.token, function(error) {
                                  // If the connection is successful, initialize a publisher and publish to the session
                                  if (error) {
                                      handleError(error);
                                  } else {
                                      session.publish(publisher, handleError);
                                  }
                                  resolve();
                                  return;
                              });
                          }
              
                          if (vars.mode == "moderator") {
                              resolve();
                              return;
                          } else { 
                              page.c8o.log.error(''[OpenTok] error, unsupported mode. Must be publisher, subscriber or moderator  : '' + vars.mode);
                          }
              '
      module_ts_imports: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
              - com.twinsoft.convertigo.beans.common.XMLVector: 
                - java.lang.String: 
                  - ↑value: '* as OT'
                - java.lang.String: 
                  - ↑value: '@opentok/client'
      package_dependencies: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
              - com.twinsoft.convertigo.beans.common.XMLVector: 
                - java.lang.String: 
                  - ↑value: '@opentok/client'
                - java.lang.String: 
                  - ↑value: 2.18.1
      page_ts_imports: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
              - com.twinsoft.convertigo.beans.common.XMLVector: 
                - java.lang.String: 
                  - ↑value: '* as OT'
                - java.lang.String: 
                  - ↑value: '@opentok/client'
      ↓apiKey [mobile.components.UIControlVariable-1604079551362]: 
        varValue: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
            - MobileSmartSourceType: script:params1604074988538.apiKey
      ↓sessionId [mobile.components.UIControlVariable-1604079564607]: 
        varValue: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
            - MobileSmartSourceType: script:params1604074988538.sessionId
      ↓token [mobile.components.UIControlVariable-1604079900661]: 
        varValue: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
            - MobileSmartSourceType: script:params1604074988538.token
      ↓mode [mobile.components.UIControlVariable-1604749769355]: 
        varValue: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.mobile.components.MobileSmartSourceType
            - MobileSmartSourceType: script:params1604074988538.mode
↓sessionId [mobile.components.UICompVariable-1604744486619]: 
  comment: The sessionId
↓token [mobile.components.UICompVariable-1604744505461]: 
  comment: The token for connection
↓apiKey [mobile.components.UICompVariable-1604749645826]: 
  comment: The apiKey as declared in the API portal
↓mode [mobile.components.UICompVariable-1604859987359]: 
  value: '''PUBLISHER'''
↓PageEvent [mobile.components.UIPageEvent-1604915813759]: 
  ↓findOpenTokDiv [mobile.components.UICustomAction-1604926852558]: 
    actionValue: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.FormatedContent
        - com.twinsoft.convertigo.beans.common.FormatedContent: 
          →: |
            '    		page.c8o.log.debug(''[MB] ''+ props.actionFunction +'': ''+ props.actionName);
                        setTimeout(()=> {
                            //let dispatched = page["btn"].nativeElement.dispatchEvent(event);
                            page["publisher"].nativeElement.dispatchEvent(new MouseEvent(''mousedown'', {
                                view: window,
                                bubbles: true,
                                cancelable: true
                            }));
            
                            page["publisher"].nativeElement.dispatchEvent(new MouseEvent(''click'', {
                                view: window,
                                bubbles: true,
                                cancelable: true
                            }));
                            
                            page.c8o.log.debug(''[MB] *** click done :'' );
                        }, 0)
                		resolve();
            '
    comment: |
      This will find the OpenTokDiv and Simulate a Click on it to trigger the OpenTok CustomAction
      installing the video. We have to do it this way as we cannot use paramXXXXXX.property in Page 
      Events.
      